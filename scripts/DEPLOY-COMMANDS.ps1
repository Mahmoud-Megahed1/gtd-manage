#!/usr/bin/env pwsh
# Deploy Commands - Copy and Paste
# ????? ????? - ???? ?????

Write-Host @"

?????????????????????????????????????????????????????????????????
?                                                               ?
?              ?? ????? ????? - ???? ?????                     ?
?                                                               ?
?????????????????????????????????????????????????????????????????

"@ -ForegroundColor Cyan

Write-Host @"

???? ????? ????? ?? ????? ???????:

???????????????????????????????????????????????????????????????
  ??????? 1: ???? ????? (???? ???) ?????
???????????????????????????????????????????????????????????????

???? ????? ??? ?????:

"@ -ForegroundColor Yellow

Write-Host ".\scripts\simple-deploy.ps1" -ForegroundColor Cyan

Write-Host @"


?????? ??:
  1. SSH Host (?? Hostinger Panel > Advanced > SSH)
  2. SSH Username
  3. SSH Port (???? Enter ?????????: 65002)
  4. Domain Name (????: gtd-sys.com)
  5. Database Name
  6. Database User
  7. Database Password

?? ???? ?? ???? ?????????!

???????????????????????????????????????????????????????????????
  ??????? 2: ?? ??? ???????? ????
???????????????????????????????????????????????????????????????

???? ????? ??? ?????:

"@ -ForegroundColor Yellow

Write-Host ".\scripts\auto-deploy.ps1" -ForegroundColor Cyan

Write-Host @"


???? ???????? ?? .deploy-config.json ????? ??????

???????????????????????????????????????????????????????????????
  ??????? 3: ???? ????? ???
???????????????????????????????????????????????????????????????

?????? 1: ??????? (??? ?????)

"@ -ForegroundColor Yellow

Write-Host ".\scripts\master-deploy.ps1 -Setup" -ForegroundColor Cyan

Write-Host @"


?????? 2: ?????

"@ -ForegroundColor Yellow

Write-Host ".\scripts\master-deploy.ps1 -Deploy" -ForegroundColor Cyan

Write-Host @"


???????????????????????????????????????????????????????????????
  ??  ??? ?? ???? - ???? ??:
???????????????????????????????????????????????????????????????

  ? ???? Hostinger Panel: https://hpanel.hostinger.com
  ? ???? SSH Host, Username, Port
  ? MySQL Database ????
  ? SSH Public Key (.ssh/id_ed25519.pub) ???? ?? Hostinger

?????? SSH Key:
  1. ???? Hostinger Panel > Advanced > SSH Keys
  2. ???? Add New Key
  3. ???? ????? .ssh/id_ed25519.pub ??????

???????????????????????????????????????????????????????????????
  ?? ?? SSH Key ?? ?????
???????????????????????????????????????????????????????????????

???? ????? ??:

"@ -ForegroundColor Yellow

Write-Host "ssh-keygen -t ed25519 -f .ssh/id_ed25519 -N ''" -ForegroundColor Cyan

Write-Host @"


?? ??? ??????? ?? Hostinger ??? ?? ???? ?????.

???????????????????????????????????????????????????????????????
  ?? ????????
???????????????????????????????????????????????????????????????

???? ??????:

"@ -ForegroundColor Yellow

Write-Host "code DEPLOY-INSTRUCTIONS.md" -ForegroundColor Cyan

Write-Host @"


?? ?????? ??????:

"@ -ForegroundColor Yellow

Write-Host "code START-HERE-DEPLOY.md" -ForegroundColor Cyan

Write-Host @"


???????????????????????????????????????????????????????????????

? ???? ????? ????? ?????!

"@ -ForegroundColor Green

# Show current status
Write-Host "`n?? ???? ???????:" -ForegroundColor Yellow
Write-Host ""

if (Test-Path "dist/index.js") {
    $size = [math]::Round((Get-Item "dist/index.js").Length / 1MB, 2)
    Write-Host "  ? Build ????: dist/index.js ($size MB)" -ForegroundColor Green
} else {
    Write-Host "  ? Build ?? ????? - ????: pnpm run build" -ForegroundColor Red
}

if (Test-Path ".ssh/id_ed25519") {
    Write-Host "  ? SSH Key ?????" -ForegroundColor Green
} else {
    Write-Host "  ? SSH Key ?? ????? - ????: ssh-keygen -t ed25519 -f .ssh/id_ed25519" -ForegroundColor Red
}

if (Test-Path "node_modules") {
    Write-Host "  ? Dependencies ?????" -ForegroundColor Green
} else {
    Write-Host "  ??  Dependencies ?? ????? - ????: pnpm install" -ForegroundColor Yellow
}

Write-Host ""
Write-Host "???????????????????????????????????????????????????????????????" -ForegroundColor Gray
Write-Host ""
Write-Host "?? ????? ???? ??? ??????? ????? ??????!" -ForegroundColor Cyan
Write-Host ""
