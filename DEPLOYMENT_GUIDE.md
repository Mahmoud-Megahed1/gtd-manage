# تعليمات نشر التحديثات (Deployment Guide)

تم رفع التعديلات البرمجية الخاصة بـ "حفظ وأرشفة التقارير" إلى GitHub. لتفعيلها على السيرفر (Hostinger) وتحديث قاعدة البيانات، يرجى اتباع الخطوات التالية:

## 1. الاتصال بالسيرفر
اتصل بالسيرفر الخاص بك عبر SSH.

## 2. تحديث الكود وقاعدة البيانات
نفذ الأوامر التالية بالترتيب داخل مجلد المشروع:

```bash
# 1. سحب آخر التعديلات
git pull origin main

# 2. تثبيت أي مكتبات جديدة (اختياري)
npm install

# 3. تحديث هيكل قاعدة البيانات (لإضافة جدول التقارير المحفوظة)
# هذا الأمر مهم جداً لكي تعمل خاصية الحفظ
npm run db:push

# 4. تحديث أرقام الموظفين (تنفيذ أوامر SQL المطلوبة)
# يقوم هذا السكربت بتعديل employeeNumber كما طلبت
npx tsx scripts/fix-employees.ts

# 5. بناء التطبيق من جديد
npm run build

# 6. إعادة تشغيل الخدمة
# استبدل 'gtd-sys' باسم العملية لديك إذا كان مختلفاً
pm2 restart gtd-sys --update-env
```

## ملاحظات
- **بخصوص أوامر MySQL:** السكربت في الخطوة رقم 4 (`npx tsx scripts/fix-employees.ts`) يحتوي بالفعل على أوامر `UPDATE` التي طلبتها، وسينفذها بأمان باستخدام إعدادات الاتصال الموجودة في السيرفر.
- **في حال فشل أي خطوة:** يرجى التحقق من رسائل الخطأ، وعادة ما تكون متعلقة بمتغيرات البيئة `.env` إذا كانت غير مضبوطة.
